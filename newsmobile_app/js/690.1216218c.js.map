{"version":3,"file":"js/690.1216218c.js","mappings":"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","sources":["webpack://newsmobile/./src/views/LifeView.vue","webpack://newsmobile/src/views/LifeView.vue","webpack://newsmobile/./src/views/LifeView.vue?fcb5","webpack://newsmobile/./src/views/LifeView.vue?0ffd"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"life-container\"},[_c('van-nav-bar',{staticClass:\"nav-header\",attrs:{\"title\":\"生活地图\"},scopedSlots:_vm._u([{key:\"right\",fn:function(){return [_c('van-icon',{attrs:{\"name\":\"search\",\"size\":\"18\"},on:{\"click\":function($event){_vm.showSearch = true}}})]},proxy:true}])}),_c('div',{ref:\"mapContainer\",attrs:{\"id\":\"map-container\"}}),_c('div',{staticClass:\"location-btn\",on:{\"click\":_vm.locateMe}},[_c('van-icon',{attrs:{\"name\":\"aim\"}})],1),(_vm.currentAddress)?_c('div',{staticClass:\"location-card\"},[_c('div',{staticClass:\"card-header\"},[_c('van-icon',{staticClass:\"location-icon\",attrs:{\"name\":\"location-o\"}}),_c('span',{staticClass:\"card-title\"},[_vm._v(\"当前位置\")])],1),_c('div',{staticClass:\"card-content\"},[_vm._v(_vm._s(_vm.currentAddress))]),_c('div',{staticClass:\"card-actions\"},[_c('van-button',{attrs:{\"size\":\"small\",\"round\":\"\",\"type\":\"primary\"},on:{\"click\":function($event){return _vm.searchNearby('餐饮')}}},[_c('van-icon',{attrs:{\"name\":\"shop-o\"}}),_vm._v(\" 美食 \")],1),_c('van-button',{attrs:{\"size\":\"small\",\"round\":\"\",\"type\":\"info\"},on:{\"click\":function($event){return _vm.searchNearby('酒店')}}},[_c('van-icon',{attrs:{\"name\":\"hotel-o\"}}),_vm._v(\" 酒店 \")],1),_c('van-button',{attrs:{\"size\":\"small\",\"round\":\"\",\"type\":\"success\"},on:{\"click\":function($event){return _vm.searchNearby('景点')}}},[_c('van-icon',{attrs:{\"name\":\"photo-o\"}}),_vm._v(\" 景点 \")],1)],1)]):_vm._e(),_c('van-popup',{style:({ height: '100%' }),attrs:{\"position\":\"top\"},model:{value:(_vm.showSearch),callback:function ($$v) {_vm.showSearch=$$v},expression:\"showSearch\"}},[_c('div',{staticClass:\"search-panel\"},[_c('van-search',{attrs:{\"show-action\":\"\",\"placeholder\":\"搜索地点\"},on:{\"search\":_vm.onSearch,\"cancel\":function($event){_vm.showSearch = false}},model:{value:(_vm.searchKeyword),callback:function ($$v) {_vm.searchKeyword=$$v},expression:\"searchKeyword\"}}),(_vm.searchResults.length > 0)?_c('div',{staticClass:\"search-results\"},_vm._l((_vm.searchResults),function(item,index){return _c('van-cell',{key:index,attrs:{\"title\":item.title,\"label\":item.address,\"is-link\":\"\"},on:{\"click\":function($event){return _vm.goToLocation(item)}}})}),1):(_vm.searchKeyword && !_vm.searching)?_c('van-empty',{attrs:{\"description\":\"暂无搜索结果\"}}):_vm._e()],1)]),_c('van-action-sheet',{attrs:{\"title\":_vm.nearbyTitle},model:{value:(_vm.showNearby),callback:function ($$v) {_vm.showNearby=$$v},expression:\"showNearby\"}},[_c('div',{staticClass:\"nearby-list\"},[_vm._l((_vm.nearbyResults),function(item,index){return _c('van-cell',{key:index,attrs:{\"title\":item.title,\"label\":item.address,\"is-link\":\"\"},on:{\"click\":function($event){return _vm.goToLocation(item)}},scopedSlots:_vm._u([{key:\"right-icon\",fn:function(){return [_c('span',{staticClass:\"distance\"},[_vm._v(_vm._s(item.distance))])]},proxy:true}],null,true)})}),(_vm.nearbyResults.length === 0)?_c('van-empty',{attrs:{\"description\":\"附近暂无相关地点\"}}):_vm._e()],2)]),_c('van-tabbar',{attrs:{\"active-color\":\"#e60012\",\"route\":\"\"},model:{value:(_vm.active),callback:function ($$v) {_vm.active=$$v},expression:\"active\"}},[_c('van-tabbar-item',{attrs:{\"icon\":\"home-o\",\"to\":\"/\"}},[_vm._v(\"首页\")]),_c('van-tabbar-item',{attrs:{\"icon\":\"location-o\",\"to\":\"/life\"}},[_vm._v(\"生活\")]),_c('van-tabbar-item',{attrs:{\"icon\":\"guide-o\",\"to\":\"/traffic\"}},[_vm._v(\"交通\")]),_c('van-tabbar-item',{attrs:{\"icon\":\"user-o\",\"to\":\"/my\"}},[_vm._v(\"我的\")])],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"life-container\">\n    <!-- 顶部导航栏 -->\n    <van-nav-bar title=\"生活地图\" class=\"nav-header\">\n      <template #right>\n        <van-icon name=\"search\" size=\"18\" @click=\"showSearch = true\" />\n      </template>\n    </van-nav-bar>\n\n    <!-- 地图容器 -->\n    <div id=\"map-container\" ref=\"mapContainer\"></div>\n\n    <!-- 定位按钮 -->\n    <div class=\"location-btn\" @click=\"locateMe\">\n      <van-icon name=\"aim\" />\n    </div>\n\n    <!-- 当前位置信息卡片 -->\n    <div class=\"location-card\" v-if=\"currentAddress\">\n      <div class=\"card-header\">\n        <van-icon name=\"location-o\" class=\"location-icon\" />\n        <span class=\"card-title\">当前位置</span>\n      </div>\n      <div class=\"card-content\">{{ currentAddress }}</div>\n      <div class=\"card-actions\">\n        <van-button size=\"small\" round type=\"primary\" @click=\"searchNearby('餐饮')\">\n          <van-icon name=\"shop-o\" /> 美食\n        </van-button>\n        <van-button size=\"small\" round type=\"info\" @click=\"searchNearby('酒店')\">\n          <van-icon name=\"hotel-o\" /> 酒店\n        </van-button>\n        <van-button size=\"small\" round type=\"success\" @click=\"searchNearby('景点')\">\n          <van-icon name=\"photo-o\" /> 景点\n        </van-button>\n      </div>\n    </div>\n\n    <!-- 搜索弹窗 -->\n    <van-popup v-model=\"showSearch\" position=\"top\" :style=\"{ height: '100%' }\">\n      <div class=\"search-panel\">\n        <van-search\n          v-model=\"searchKeyword\"\n          show-action\n          placeholder=\"搜索地点\"\n          @search=\"onSearch\"\n          @cancel=\"showSearch = false\"\n        />\n        <div class=\"search-results\" v-if=\"searchResults.length > 0\">\n          <van-cell \n            v-for=\"(item, index) in searchResults\" \n            :key=\"index\"\n            :title=\"item.title\"\n            :label=\"item.address\"\n            is-link\n            @click=\"goToLocation(item)\"\n          />\n        </div>\n        <van-empty v-else-if=\"searchKeyword && !searching\" description=\"暂无搜索结果\" />\n      </div>\n    </van-popup>\n\n    <!-- 周边结果弹窗 -->\n    <van-action-sheet v-model=\"showNearby\" :title=\"nearbyTitle\">\n      <div class=\"nearby-list\">\n        <van-cell \n          v-for=\"(item, index) in nearbyResults\" \n          :key=\"index\"\n          :title=\"item.title\"\n          :label=\"item.address\"\n          is-link\n          @click=\"goToLocation(item)\"\n        >\n          <template #right-icon>\n            <span class=\"distance\">{{ item.distance }}</span>\n          </template>\n        </van-cell>\n        <van-empty v-if=\"nearbyResults.length === 0\" description=\"附近暂无相关地点\" />\n      </div>\n    </van-action-sheet>\n\n    <!-- 底部 Tabbar -->\n    <van-tabbar v-model=\"active\" active-color=\"#e60012\" route>\n      <van-tabbar-item icon=\"home-o\" to=\"/\">首页</van-tabbar-item>\n      <van-tabbar-item icon=\"location-o\" to=\"/life\">生活</van-tabbar-item>\n      <van-tabbar-item icon=\"guide-o\" to=\"/traffic\">交通</van-tabbar-item>\n      <van-tabbar-item icon=\"user-o\" to=\"/my\">我的</van-tabbar-item>\n    </van-tabbar>\n  </div>\n</template>\n\n<script>\n/* global BMapGL */\nexport default {\n  name: 'LifeView',\n  data() {\n    return {\n      active: 1,\n      map: null,\n      currentAddress: '',\n      currentPoint: null,\n      showSearch: false,\n      searchKeyword: '',\n      searchResults: [],\n      searching: false,\n      showNearby: false,\n      nearbyTitle: '',\n      nearbyResults: [],\n      geolocation: null,\n      localSearch: null\n    }\n  },\n  mounted() {\n    this.initMap()\n  },\n  beforeDestroy() {\n    // 清理地图实例\n    if (this.map) {\n      this.map = null\n    }\n  },\n  methods: {\n    // 初始化地图\n    initMap() {\n      // 检查百度地图 API 是否加载\n      if (typeof BMapGL === 'undefined') {\n        console.error('百度地图 API 未加载')\n        this.$toast.fail('地图加载失败')\n        return\n      }\n\n      // 创建地图实例\n      this.map = new BMapGL.Map(this.$refs.mapContainer)\n      \n      // 设置初始中心点（北京）\n      const point = new BMapGL.Point(116.404, 39.915)\n      this.map.centerAndZoom(point, 15)\n      \n      // 开启滚轮缩放\n      this.map.enableScrollWheelZoom(true)\n      \n      // 添加比例尺控件\n      const scaleCtrl = new BMapGL.ScaleControl()\n      this.map.addControl(scaleCtrl)\n      \n      // 初始化定位服务\n      this.geolocation = new BMapGL.Geolocation()\n      \n      // 初始化搜索服务\n      this.localSearch = new BMapGL.LocalSearch(this.map, {\n        renderOptions: { map: this.map }\n      })\n      \n      // 自动定位\n      this.locateMe()\n    },\n\n    // 定位当前位置\n    locateMe() {\n      if (!this.geolocation) {\n        this.$toast.fail('定位服务未初始化')\n        return\n      }\n\n      this.$toast.loading({ message: '定位中...', forbidClick: true })\n\n      this.geolocation.getCurrentPosition((result) => {\n        this.$toast.clear()\n        \n        if (this.geolocation.getStatus() === 0) {\n          // 定位成功\n          this.currentPoint = result.point\n          this.currentAddress = result.address.province + result.address.city + result.address.district + result.address.street + result.address.streetNumber\n          \n          // 移动地图到当前位置\n          this.map.centerAndZoom(result.point, 16)\n          \n          // 添加当前位置标记\n          this.map.clearOverlays()\n          const marker = new BMapGL.Marker(result.point)\n          this.map.addOverlay(marker)\n          \n          // 添加定位圆圈\n          const circle = new BMapGL.Circle(result.point, result.accuracy, {\n            strokeColor: '#e60012',\n            strokeWeight: 2,\n            strokeOpacity: 0.5,\n            fillColor: '#e60012',\n            fillOpacity: 0.1\n          })\n          this.map.addOverlay(circle)\n          \n          this.$toast.success('定位成功')\n        } else {\n          this.$toast.fail('定位失败，请检查权限')\n        }\n      }, {\n        enableHighAccuracy: true,\n        timeout: 10000\n      })\n    },\n\n    // 搜索地点\n    onSearch() {\n      if (!this.searchKeyword.trim()) {\n        return\n      }\n\n      this.searching = true\n      this.searchResults = []\n\n      this.localSearch.setSearchCompleteCallback((results) => {\n        this.searching = false\n        if (results && results.getCurrentNumPois() > 0) {\n          const pois = []\n          for (let i = 0; i < results.getCurrentNumPois(); i++) {\n            const poi = results.getPoi(i)\n            pois.push({\n              title: poi.title,\n              address: poi.address,\n              point: poi.point\n            })\n          }\n          this.searchResults = pois\n        }\n      })\n\n      this.localSearch.search(this.searchKeyword)\n    },\n\n    // 搜索周边\n    searchNearby(keyword) {\n      if (!this.currentPoint) {\n        this.$toast('请先定位')\n        return\n      }\n\n      this.nearbyTitle = `附近的${keyword}`\n      this.nearbyResults = []\n      this.showNearby = true\n\n      const nearbySearch = new BMapGL.LocalSearch(this.map, {\n        renderOptions: { map: this.map },\n        onSearchComplete: (results) => {\n          if (results && results.getCurrentNumPois() > 0) {\n            const pois = []\n            for (let i = 0; i < results.getCurrentNumPois(); i++) {\n              const poi = results.getPoi(i)\n              // 计算距离\n              const distance = this.map.getDistance(this.currentPoint, poi.point)\n              pois.push({\n                title: poi.title,\n                address: poi.address,\n                point: poi.point,\n                distance: distance < 1000 ? `${Math.round(distance)}m` : `${(distance / 1000).toFixed(1)}km`\n              })\n            }\n            this.nearbyResults = pois\n          }\n        }\n      })\n\n      nearbySearch.searchNearby(keyword, this.currentPoint, 2000)\n    },\n\n    // 跳转到指定位置\n    goToLocation(item) {\n      this.showSearch = false\n      this.showNearby = false\n      \n      this.map.clearOverlays()\n      this.map.centerAndZoom(item.point, 17)\n      \n      const marker = new BMapGL.Marker(item.point)\n      this.map.addOverlay(marker)\n      \n      // 添加信息窗口\n      const infoWindow = new BMapGL.InfoWindow(item.title, {\n        width: 200,\n        title: item.title\n      })\n      marker.addEventListener('click', () => {\n        this.map.openInfoWindow(infoWindow, item.point)\n      })\n      \n      // 自动打开信息窗口\n      setTimeout(() => {\n        this.map.openInfoWindow(infoWindow, item.point)\n      }, 300)\n    }\n  }\n}\n</script>\n\n<style scoped>\n.life-container {\n  position: relative;\n  width: 100%;\n  height: 100vh;\n  overflow: hidden;\n}\n\n/* 导航栏 */\n.nav-header {\n  background: linear-gradient(135deg, #e60012 0%, #ff4d4f 100%) !important;\n}\n.nav-header ::v-deep .van-nav-bar__title {\n  color: #fff !important;\n  font-weight: bold;\n}\n.nav-header ::v-deep .van-icon {\n  color: #fff !important;\n}\n\n/* 地图容器 */\n#map-container {\n  width: 100%;\n  height: calc(100vh - 46px - 50px);\n  position: relative;\n}\n\n/* 定位按钮 */\n.location-btn {\n  position: absolute;\n  right: 16px;\n  bottom: 180px;\n  width: 44px;\n  height: 44px;\n  background: #fff;\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  box-shadow: 0 2px 12px rgba(0, 0, 0, 0.15);\n  z-index: 100;\n  cursor: pointer;\n  transition: all 0.2s;\n}\n.location-btn:active {\n  transform: scale(0.95);\n  background: #f5f5f5;\n}\n.location-btn .van-icon {\n  font-size: 22px;\n  color: #e60012;\n}\n\n/* 当前位置卡片 */\n.location-card {\n  position: absolute;\n  left: 16px;\n  right: 16px;\n  bottom: 70px;\n  background: #fff;\n  border-radius: 16px;\n  padding: 16px;\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.12);\n  z-index: 100;\n}\n.card-header {\n  display: flex;\n  align-items: center;\n  margin-bottom: 8px;\n}\n.location-icon {\n  font-size: 18px;\n  color: #e60012;\n  margin-right: 6px;\n}\n.card-title {\n  font-size: 14px;\n  font-weight: 600;\n  color: #323233;\n}\n.card-content {\n  font-size: 13px;\n  color: #646566;\n  line-height: 1.5;\n  margin-bottom: 12px;\n}\n.card-actions {\n  display: flex;\n  gap: 10px;\n}\n.card-actions .van-button {\n  flex: 1;\n  font-size: 12px;\n}\n\n/* 搜索面板 */\n.search-panel {\n  height: 100%;\n  background: #f7f8fa;\n}\n.search-results {\n  background: #fff;\n  max-height: calc(100vh - 54px);\n  overflow-y: auto;\n}\n\n/* 周边列表 */\n.nearby-list {\n  max-height: 50vh;\n  overflow-y: auto;\n}\n.distance {\n  font-size: 12px;\n  color: #969799;\n}\n</style>","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./LifeView.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./LifeView.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./LifeView.vue?vue&type=template&id=50f82e87&scoped=true\"\nimport script from \"./LifeView.vue?vue&type=script&lang=js\"\nexport * from \"./LifeView.vue?vue&type=script&lang=js\"\nimport style0 from \"./LifeView.vue?vue&type=style&index=0&id=50f82e87&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"50f82e87\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","attrs","scopedSlots","_u","key","fn","on","$event","showSearch","proxy","ref","locateMe","currentAddress","_v","_s","searchNearby","_e","style","height","model","value","callback","$$v","expression","onSearch","searchKeyword","searchResults","length","_l","item","index","title","address","goToLocation","searching","nearbyTitle","showNearby","nearbyResults","distance","active","staticRenderFns","name","data","map","currentPoint","geolocation","localSearch","mounted","initMap","beforeDestroy","methods","BMapGL","console","error","$toast","fail","Map","$refs","mapContainer","point","Point","centerAndZoom","enableScrollWheelZoom","scaleCtrl","ScaleControl","addControl","Geolocation","LocalSearch","renderOptions","loading","message","forbidClick","getCurrentPosition","result","clear","getStatus","province","city","district","street","streetNumber","clearOverlays","marker","Marker","addOverlay","circle","Circle","accuracy","strokeColor","strokeWeight","strokeOpacity","fillColor","fillOpacity","success","enableHighAccuracy","timeout","trim","setSearchCompleteCallback","results","getCurrentNumPois","pois","i","poi","getPoi","push","search","keyword","nearbySearch","onSearchComplete","getDistance","Math","round","toFixed","infoWindow","InfoWindow","width","addEventListener","openInfoWindow","setTimeout","component"],"ignoreList":[],"sourceRoot":""}