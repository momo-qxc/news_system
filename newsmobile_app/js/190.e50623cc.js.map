{"version":3,"file":"js/190.e50623cc.js","mappings":"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","sources":["webpack://newsmobile/./src/views/NewsDetail.vue","webpack://newsmobile/src/views/NewsDetail.vue","webpack://newsmobile/./src/views/NewsDetail.vue?eaca","webpack://newsmobile/./src/views/NewsDetail.vue?4e99"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"detail-container\"},[_c('van-nav-bar',{staticClass:\"nav-header\",attrs:{\"title\":\"新闻详情\",\"left-arrow\":\"\"},on:{\"click-left\":_vm.goBack}}),(_vm.loading)?_c('van-loading',{staticClass:\"loading-center\",attrs:{\"size\":\"36px\",\"vertical\":\"\"}},[_vm._v(\" 加载中... \")]):_c('div',{staticClass:\"news-content-wrapper\"},[_c('h1',{staticClass:\"news-title\"},[_vm._v(_vm._s(_vm.news.ntitle))]),_c('div',{staticClass:\"news-meta\"},[_c('span',{staticClass:\"meta-author\"},[_c('van-icon',{attrs:{\"name\":\"user-o\"}}),_vm._v(\" \"+_vm._s(_vm.news.author || '未知来源')+\" \")],1),_c('span',{staticClass:\"meta-date\"},[_c('van-icon',{attrs:{\"name\":\"clock-o\"}}),_vm._v(\" \"+_vm._s(_vm.news.createdate)+\" \")],1)]),_c('div',{staticClass:\"news-body\",domProps:{\"innerHTML\":_vm._s(_vm.news.content || '暂无内容')}}),_c('div',{staticClass:\"action-bar\"},[_c('div',{staticClass:\"action-item\",class:{ active: _vm.isLiked },on:{\"click\":_vm.handleLike}},[_c('van-icon',{attrs:{\"name\":_vm.isLiked ? 'good-job' : 'good-job-o'}}),_c('span',[_vm._v(_vm._s(_vm.isLiked ? '已点赞' : '点赞'))])],1),_c('div',{staticClass:\"action-item\",class:{ active: _vm.isCollected },on:{\"click\":_vm.handleCollect}},[_c('van-icon',{attrs:{\"name\":_vm.isCollected ? 'star' : 'star-o'}}),_c('span',[_vm._v(_vm._s(_vm.isCollected ? '已收藏' : '收藏'))])],1),_c('div',{staticClass:\"action-item\",on:{\"click\":_vm.scrollToComment}},[_c('van-icon',{attrs:{\"name\":\"comment-o\"}}),_c('span',[_vm._v(\"评论\")])],1)]),_c('van-divider',[_vm._v(\"评论区\")]),_c('div',{staticClass:\"comment-input-section\"},[_c('van-field',{staticClass:\"comment-input\",attrs:{\"rows\":\"3\",\"autosize\":\"\",\"type\":\"textarea\",\"placeholder\":\"说点什么吧...\"},model:{value:(_vm.commentContent),callback:function ($$v) {_vm.commentContent=$$v},expression:\"commentContent\"}}),_c('div',{staticClass:\"comment-options\"},[_c('van-checkbox',{attrs:{\"shape\":\"square\"},model:{value:(_vm.isAnonymous),callback:function ($$v) {_vm.isAnonymous=$$v},expression:\"isAnonymous\"}},[_vm._v(\"匿名评论\")]),_c('van-button',{attrs:{\"type\":\"primary\",\"size\":\"small\",\"round\":\"\"},on:{\"click\":_vm.submitComment}},[_vm._v(\" 发表评论 \")])],1)],1),_c('div',{ref:\"commentSection\",staticClass:\"comment-list\"},[(_vm.comments.length === 0)?_c('div',{staticClass:\"no-comment\"},[_c('van-empty',{attrs:{\"image\":\"search\",\"description\":\"暂无评论，快来抢沙发吧~\"}})],1):_vm._e(),_vm._l((_vm.comments),function(comment){return _c('div',{key:comment.cid,staticClass:\"comment-item\"},[_c('div',{staticClass:\"comment-header\"},[_c('span',{staticClass:\"comment-user\"},[_vm._v(_vm._s(comment.username || '匿名用户'))]),(comment.status === 0)?_c('span',{staticClass:\"pending-tag\"},[_vm._v(\"待审核\")]):_vm._e()]),_c('div',{staticClass:\"comment-text\"},[_vm._v(_vm._s(comment.content))]),_c('div',{staticClass:\"comment-footer\"},[_c('span',{staticClass:\"comment-time\"},[_vm._v(_vm._s(comment.createdate))]),(comment.uid === _vm.currentUid)?_c('span',{staticClass:\"comment-delete\",on:{\"click\":function($event){return _vm.deleteComment(comment.cid)}}},[_vm._v(\" 删除 \")]):_vm._e()])])})],2),_c('div',{staticClass:\"safe-area-bottom\"})],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"detail-container\">\r\n    <!-- 顶部导航栏 -->\r\n    <van-nav-bar \r\n      title=\"新闻详情\" \r\n      left-arrow \r\n      @click-left=\"goBack\"\r\n      class=\"nav-header\"\r\n    />\r\n\r\n    <!-- 加载状态 -->\r\n    <van-loading v-if=\"loading\" class=\"loading-center\" size=\"36px\" vertical>\r\n      加载中...\r\n    </van-loading>\r\n\r\n    <!-- 新闻内容 -->\r\n    <div v-else class=\"news-content-wrapper\">\r\n      <!-- 新闻标题 -->\r\n      <h1 class=\"news-title\">{{ news.ntitle }}</h1>\r\n      \r\n      <!-- 新闻元信息 -->\r\n      <div class=\"news-meta\">\r\n        <span class=\"meta-author\">\r\n          <van-icon name=\"user-o\" /> {{ news.author || '未知来源' }}\r\n        </span>\r\n        <span class=\"meta-date\">\r\n          <van-icon name=\"clock-o\" /> {{ news.createdate }}\r\n        </span>\r\n      </div>\r\n\r\n      <!-- 新闻正文 -->\r\n      <div class=\"news-body\" v-html=\"news.content || '暂无内容'\"></div>\r\n\r\n      <!-- 操作栏：点赞、收藏 -->\r\n      <div class=\"action-bar\">\r\n        <div \r\n          class=\"action-item\" \r\n          :class=\"{ active: isLiked }\"\r\n          @click=\"handleLike\"\r\n        >\r\n          <van-icon :name=\"isLiked ? 'good-job' : 'good-job-o'\" />\r\n          <span>{{ isLiked ? '已点赞' : '点赞' }}</span>\r\n        </div>\r\n        <div \r\n          class=\"action-item\" \r\n          :class=\"{ active: isCollected }\"\r\n          @click=\"handleCollect\"\r\n        >\r\n          <van-icon :name=\"isCollected ? 'star' : 'star-o'\" />\r\n          <span>{{ isCollected ? '已收藏' : '收藏' }}</span>\r\n        </div>\r\n        <div class=\"action-item\" @click=\"scrollToComment\">\r\n          <van-icon name=\"comment-o\" />\r\n          <span>评论</span>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- 分割线 -->\r\n      <van-divider>评论区</van-divider>\r\n\r\n      <!-- 评论输入 -->\r\n      <div class=\"comment-input-section\">\r\n        <van-field\r\n          v-model=\"commentContent\"\r\n          rows=\"3\"\r\n          autosize\r\n          type=\"textarea\"\r\n          placeholder=\"说点什么吧...\"\r\n          class=\"comment-input\"\r\n        />\r\n        <div class=\"comment-options\">\r\n          <van-checkbox v-model=\"isAnonymous\" shape=\"square\">匿名评论</van-checkbox>\r\n          <van-button \r\n            type=\"primary\" \r\n            size=\"small\" \r\n            round\r\n            @click=\"submitComment\"\r\n          >\r\n            发表评论\r\n          </van-button>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- 评论列表 -->\r\n      <div class=\"comment-list\" ref=\"commentSection\">\r\n        <div v-if=\"comments.length === 0\" class=\"no-comment\">\r\n          <van-empty image=\"search\" description=\"暂无评论，快来抢沙发吧~\" />\r\n        </div>\r\n        <div \r\n          v-for=\"comment in comments\" \r\n          :key=\"comment.cid\" \r\n          class=\"comment-item\"\r\n        >\r\n          <div class=\"comment-header\">\r\n            <span class=\"comment-user\">{{ comment.username || '匿名用户' }}</span>\r\n            <span v-if=\"comment.status === 0\" class=\"pending-tag\">待审核</span>\r\n          </div>\r\n          <div class=\"comment-text\">{{ comment.content }}</div>\r\n          <div class=\"comment-footer\">\r\n            <span class=\"comment-time\">{{ comment.createdate }}</span>\r\n            <span \r\n              v-if=\"comment.uid === currentUid\" \r\n              class=\"comment-delete\"\r\n              @click=\"deleteComment(comment.cid)\"\r\n            >\r\n              删除\r\n            </span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- 底部安全区 -->\r\n      <div class=\"safe-area-bottom\"></div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios'\r\n\r\nexport default {\r\n  name: 'NewsDetail',\r\n  data() {\r\n    return {\r\n      loading: true,\r\n      news: {},\r\n      isLiked: false,\r\n      isCollected: false,\r\n      currentColid: null,\r\n      currentUid: null,\r\n      commentContent: '',\r\n      isAnonymous: false,\r\n      comments: []\r\n    }\r\n  },\r\n  computed: {\r\n    nid() {\r\n      return this.$route.params.nid\r\n    },\r\n    phone() {\r\n      return sessionStorage.getItem('cuser')\r\n    }\r\n  },\r\n  mounted() {\r\n    this.loadNews()\r\n    if (this.phone) {\r\n      this.getCurrentUser()\r\n    }\r\n  },\r\n  methods: {\r\n    goBack() {\r\n      this.$router.back()\r\n    },\r\n    \r\n    // 获取当前用户信息\r\n    async getCurrentUser() {\r\n      try {\r\n        const res = await axios.get(`http://localhost:6060/news/users/getbyphone?phone=${this.phone}`)\r\n        let data = res.data\r\n        if (typeof data === 'string') data = JSON.parse(data)\r\n        if (data && data.uid) {\r\n          this.currentUid = data.uid\r\n        }\r\n      } catch (e) {\r\n        console.error('Get user error:', e)\r\n      }\r\n    },\r\n\r\n    // 加载新闻详情\r\n    async loadNews() {\r\n      this.loading = true\r\n      try {\r\n        const res = await axios.get(`http://localhost:6060/news/newsinfo/getone?nid=${this.nid}`)\r\n        let data = res.data\r\n        if (typeof data === 'string') data = JSON.parse(data)\r\n        \r\n        if (data && data.ntitle) {\r\n          this.news = data\r\n          // 记录浏览历史\r\n          this.saveHistory()\r\n          // 检查点赞和收藏状态\r\n          if (this.phone) {\r\n            this.checkIfLiked()\r\n            this.checkIfCollected()\r\n          }\r\n          // 加载评论\r\n          this.loadComments()\r\n        }\r\n      } catch (e) {\r\n        console.error('Load news error:', e)\r\n        this.$toast.fail('加载失败')\r\n      } finally {\r\n        this.loading = false\r\n      }\r\n    },\r\n\r\n    // 保存浏览历史\r\n    async saveHistory() {\r\n      if (!this.phone) return\r\n      try {\r\n        const createdate = encodeURIComponent(new Date().toLocaleString())\r\n        await axios.post(`http://localhost:6060/news/history/save?phone=${this.phone}&nid=${this.nid}&createdate=${createdate}`)\r\n      } catch (e) {\r\n        console.error('Save history error:', e)\r\n      }\r\n    },\r\n\r\n    // 检查是否已点赞\r\n    async checkIfLiked() {\r\n      try {\r\n        const res = await axios.get(`http://localhost:6060/news/like/check?phone=${this.phone}&nid=${this.nid}`)\r\n        let data = res.data\r\n        if (typeof data === 'string') data = JSON.parse(data)\r\n        this.isLiked = data.liked\r\n      } catch (e) {\r\n        console.error('Check like error:', e)\r\n      }\r\n    },\r\n\r\n    // 检查是否已收藏\r\n    async checkIfCollected() {\r\n      try {\r\n        const res = await axios.get(`http://localhost:6060/news/collection/getdetail?phone=${this.phone}`)\r\n        let data = res.data\r\n        if (typeof data === 'string') data = JSON.parse(data)\r\n        if (data && data.length > 0) {\r\n          for (let item of data) {\r\n            if (item.nid == this.nid) {\r\n              this.isCollected = true\r\n              this.currentColid = item.colid\r\n              break\r\n            }\r\n          }\r\n        }\r\n      } catch (e) {\r\n        console.error('Check collect error:', e)\r\n      }\r\n    },\r\n\r\n    // 点赞操作\r\n    async handleLike() {\r\n      if (!this.phone) {\r\n        this.$toast('请先登录')\r\n        return\r\n      }\r\n      try {\r\n        const res = await axios.post(`http://localhost:6060/news/like/toggle?phone=${this.phone}&nid=${this.nid}`)\r\n        let data = res.data\r\n        if (typeof data === 'string') data = JSON.parse(data)\r\n        this.isLiked = data.liked\r\n        this.$toast(data.liked ? '点赞成功' : '已取消点赞')\r\n      } catch (e) {\r\n        console.error('Like error:', e)\r\n        this.$toast.fail('操作失败')\r\n      }\r\n    },\r\n\r\n    // 收藏操作\r\n    async handleCollect() {\r\n      if (!this.phone) {\r\n        this.$toast('请先登录')\r\n        return\r\n      }\r\n      \r\n      if (this.isCollected) {\r\n        // 取消收藏\r\n        try {\r\n          await axios.delete(`http://localhost:6060/news/collection/del/${this.currentColid}`)\r\n          this.isCollected = false\r\n          this.currentColid = null\r\n          this.$toast('已取消收藏')\r\n        } catch (e) {\r\n          console.error('Cancel collect error:', e)\r\n          this.$toast.fail('取消失败')\r\n        }\r\n      } else {\r\n        // 添加收藏\r\n        try {\r\n          const params = new URLSearchParams()\r\n          params.append('phone', this.phone)\r\n          params.append('nid', this.nid)\r\n          params.append('createdate', new Date().toLocaleString())\r\n          await axios.post('http://localhost:6060/news/collection/save', params)\r\n          this.isCollected = true\r\n          this.$toast.success('收藏成功')\r\n          // 重新获取 colid\r\n          this.checkIfCollected()\r\n        } catch (e) {\r\n          console.error('Collect error:', e)\r\n          this.$toast.fail('收藏失败')\r\n        }\r\n      }\r\n    },\r\n\r\n    // 滚动到评论区\r\n    scrollToComment() {\r\n      this.$refs.commentSection.scrollIntoView({ behavior: 'smooth' })\r\n    },\r\n\r\n    // 加载评论列表\r\n    async loadComments() {\r\n      try {\r\n        const res = await axios.get(`http://localhost:6060/news/comment/getbynid?nid=${this.nid}&phone=${this.phone || ''}`)\r\n        let data = res.data\r\n        if (typeof data === 'string') data = JSON.parse(data)\r\n        this.comments = data || []\r\n      } catch (e) {\r\n        console.error('Load comments error:', e)\r\n      }\r\n    },\r\n\r\n    // 提交评论\r\n    async submitComment() {\r\n      if (!this.phone) {\r\n        this.$toast('请先登录')\r\n        return\r\n      }\r\n      if (!this.commentContent.trim()) {\r\n        this.$toast('请输入评论内容')\r\n        return\r\n      }\r\n\r\n      try {\r\n        const params = new URLSearchParams()\r\n        params.append('phone', this.phone)\r\n        params.append('nid', this.nid)\r\n        params.append('content', this.commentContent)\r\n        params.append('createdate', new Date().toLocaleString())\r\n        params.append('anonymous', this.isAnonymous)\r\n        await axios.post('http://localhost:6060/news/comment/save', params)\r\n        this.$toast.success('评论成功')\r\n        this.commentContent = ''\r\n        this.isAnonymous = false\r\n        this.loadComments()\r\n      } catch (e) {\r\n        console.error('Submit comment error:', e)\r\n        this.$toast.fail('评论失败')\r\n      }\r\n    },\r\n\r\n    // 删除评论\r\n    async deleteComment(cid) {\r\n      try {\r\n        await this.$dialog.confirm({\r\n          title: '提示',\r\n          message: '确定要删除这条评论吗？'\r\n        })\r\n        await axios.delete(`http://localhost:6060/news/comment/del/${cid}`)\r\n        this.$toast.success('删除成功')\r\n        this.loadComments()\r\n      } catch (e) {\r\n        if (e !== 'cancel') {\r\n          console.error('Delete comment error:', e)\r\n          this.$toast.fail('删除失败')\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.detail-container {\r\n  min-height: 100vh;\r\n  background-color: #f7f8fa;\r\n}\r\n\r\n/* 导航栏 */\r\n.nav-header {\r\n  background-color: #e60012 !important;\r\n}\r\n.nav-header ::v-deep .van-nav-bar__title {\r\n  color: #fff !important;\r\n  font-weight: bold;\r\n}\r\n.nav-header ::v-deep .van-nav-bar__arrow {\r\n  color: #fff !important;\r\n}\r\n\r\n/* 加载状态 */\r\n.loading-center {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  height: 60vh;\r\n}\r\n\r\n/* 新闻内容区 */\r\n.news-content-wrapper {\r\n  padding: 16px;\r\n  padding-bottom: 60px;\r\n}\r\n\r\n/* 标题 */\r\n.news-title {\r\n  font-size: 22px;\r\n  font-weight: bold;\r\n  color: #323233;\r\n  line-height: 1.4;\r\n  margin-bottom: 12px;\r\n}\r\n\r\n/* 元信息 */\r\n.news-meta {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 16px;\r\n  font-size: 13px;\r\n  color: #969799;\r\n  margin-bottom: 20px;\r\n  padding-bottom: 12px;\r\n  border-bottom: 1px solid #ebedf0;\r\n}\r\n.meta-author, .meta-date {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 4px;\r\n}\r\n\r\n/* 正文 */\r\n.news-body {\r\n  font-size: 16px;\r\n  line-height: 1.8;\r\n  color: #323233;\r\n  text-align: justify;\r\n  margin-bottom: 24px;\r\n}\r\n.news-body ::v-deep p {\r\n  text-indent: 2em;\r\n  margin-bottom: 12px;\r\n}\r\n.news-body ::v-deep img {\r\n  max-width: 100%;\r\n  height: auto;\r\n  border-radius: 8px;\r\n  margin: 12px 0;\r\n}\r\n\r\n/* 操作栏 */\r\n.action-bar {\r\n  display: flex;\r\n  justify-content: space-around;\r\n  padding: 16px 0;\r\n  background: #fff;\r\n  border-radius: 12px;\r\n  box-shadow: 0 2px 12px rgba(0, 0, 0, 0.08);\r\n  margin-bottom: 20px;\r\n}\r\n.action-item {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  gap: 4px;\r\n  color: #646566;\r\n  font-size: 12px;\r\n  cursor: pointer;\r\n  transition: all 0.2s;\r\n}\r\n.action-item .van-icon {\r\n  font-size: 24px;\r\n}\r\n.action-item.active {\r\n  color: #e60012;\r\n}\r\n.action-item:active {\r\n  transform: scale(0.95);\r\n}\r\n\r\n/* 评论输入区 */\r\n.comment-input-section {\r\n  background: #fff;\r\n  border-radius: 12px;\r\n  padding: 12px;\r\n  margin-bottom: 16px;\r\n}\r\n.comment-input {\r\n  background: #f7f8fa;\r\n  border-radius: 8px;\r\n  margin-bottom: 12px;\r\n}\r\n.comment-options {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n}\r\n\r\n/* 评论列表 */\r\n.comment-list {\r\n  background: #fff;\r\n  border-radius: 12px;\r\n  padding: 12px;\r\n}\r\n.comment-item {\r\n  padding: 12px 0;\r\n  border-bottom: 1px solid #ebedf0;\r\n}\r\n.comment-item:last-child {\r\n  border-bottom: none;\r\n}\r\n.comment-header {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n  margin-bottom: 6px;\r\n}\r\n.comment-user {\r\n  font-size: 14px;\r\n  font-weight: 500;\r\n  color: #323233;\r\n}\r\n.pending-tag {\r\n  font-size: 11px;\r\n  color: #ff976a;\r\n  background: #fff7e8;\r\n  padding: 2px 6px;\r\n  border-radius: 4px;\r\n}\r\n.comment-text {\r\n  font-size: 14px;\r\n  line-height: 1.6;\r\n  color: #323233;\r\n  margin-bottom: 8px;\r\n}\r\n.comment-footer {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n}\r\n.comment-time {\r\n  font-size: 12px;\r\n  color: #969799;\r\n}\r\n.comment-delete {\r\n  font-size: 12px;\r\n  color: #ee0a24;\r\n  cursor: pointer;\r\n}\r\n.no-comment {\r\n  padding: 20px 0;\r\n}\r\n\r\n/* 安全区 */\r\n.safe-area-bottom {\r\n  height: 20px;\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./NewsDetail.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./NewsDetail.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./NewsDetail.vue?vue&type=template&id=2ed3466c&scoped=true\"\nimport script from \"./NewsDetail.vue?vue&type=script&lang=js\"\nexport * from \"./NewsDetail.vue?vue&type=script&lang=js\"\nimport style0 from \"./NewsDetail.vue?vue&type=style&index=0&id=2ed3466c&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2ed3466c\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","attrs","on","goBack","loading","_v","_s","news","ntitle","author","createdate","domProps","content","class","active","isLiked","handleLike","isCollected","handleCollect","scrollToComment","model","value","commentContent","callback","$$v","expression","isAnonymous","submitComment","ref","comments","length","_e","_l","comment","key","cid","username","status","uid","currentUid","$event","deleteComment","staticRenderFns","name","data","currentColid","computed","nid","$route","params","phone","sessionStorage","getItem","mounted","loadNews","getCurrentUser","methods","$router","back","res","axios","get","JSON","parse","e","console","error","saveHistory","checkIfLiked","checkIfCollected","loadComments","$toast","fail","encodeURIComponent","Date","toLocaleString","post","liked","item","colid","delete","URLSearchParams","append","success","$refs","commentSection","scrollIntoView","behavior","trim","$dialog","confirm","title","message","component"],"ignoreList":[],"sourceRoot":""}